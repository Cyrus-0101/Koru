\doxysection{application.\+c}
\hypertarget{application_8c_source}{}\label{application_8c_source}\index{engine/src/core/application.c@{engine/src/core/application.c}}
\mbox{\hyperlink{application_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{application_8h}{application.h}}"{}}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{game__types_8h}{game\_types.h}}"{}}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00003}00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{logger_8h}{core/logger.h}}"{}}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00004}00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{kmemory_8h}{core/kmemory.h}}"{}}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{platform_8h}{platform/platform.h}}"{}}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00030}\mbox{\hyperlink{structapplication__state}{00030}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structapplication__state}{application\_state}}\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00031}\mbox{\hyperlink{structapplication__state_ae224fcec4853d590c4068314f75196c2}{00031}}\ \ \ \ \ \mbox{\hyperlink{structgame}{game}}*\ \mbox{\hyperlink{structapplication__state_ae224fcec4853d590c4068314f75196c2}{game\_inst}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00035}\mbox{\hyperlink{structapplication__state_a7c10d54c29174a16313dfc1992ccabde}{00035}}\ \ \ \ \ \mbox{\hyperlink{defines_8h_a7415f24c35cb3e16a79f143c5527fdfa}{b8}}\ \mbox{\hyperlink{structapplication__state_a7c10d54c29174a16313dfc1992ccabde}{is\_running}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00040}\mbox{\hyperlink{structapplication__state_a4e7125d95754ef0c0166479931eafcd1}{00040}}\ \ \ \ \ \mbox{\hyperlink{defines_8h_a7415f24c35cb3e16a79f143c5527fdfa}{b8}}\ \mbox{\hyperlink{structapplication__state_a4e7125d95754ef0c0166479931eafcd1}{is\_suspended}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00045}\mbox{\hyperlink{structapplication__state_a14782a7e40b24efc8c814f786c6525ba}{00045}}\ \ \ \ \ \mbox{\hyperlink{structplatform__state}{platform\_state}}\ \mbox{\hyperlink{structapplication__state_a14782a7e40b24efc8c814f786c6525ba}{platform}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00050}\mbox{\hyperlink{structapplication__state_a5c49a4da818b7bae26b50df80c889279}{00050}}\ \ \ \ \ \mbox{\hyperlink{defines_8h_ac12585a6def54773148d7fb2c72a59c5}{i16}}\ \mbox{\hyperlink{structapplication__state_a5c49a4da818b7bae26b50df80c889279}{width}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00055}\mbox{\hyperlink{structapplication__state_a4a01899027b7429dce0fa6290b927f9c}{00055}}\ \ \ \ \ \mbox{\hyperlink{defines_8h_ac12585a6def54773148d7fb2c72a59c5}{i16}}\ \mbox{\hyperlink{structapplication__state_a4a01899027b7429dce0fa6290b927f9c}{height}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00060}\mbox{\hyperlink{structapplication__state_a4fc952bc899881d85115730cf7da1c5a}{00060}}\ \ \ \ \ \mbox{\hyperlink{defines_8h_a94dab5770726ccbef8c7d026cfbdf8e5}{f64}}\ \mbox{\hyperlink{structapplication__state_a4fc952bc899881d85115730cf7da1c5a}{last\_time}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00061}\mbox{\hyperlink{application_8c_a25603a9a2e5d3bf9c73d2bd2c3428655}{00061}}\ \}\ \mbox{\hyperlink{structapplication__state}{application\_state}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00066}\mbox{\hyperlink{application_8c_aca033d9c168f6eceec40a0e9a9354e79}{00066}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{defines_8h_a7415f24c35cb3e16a79f143c5527fdfa}{b8}}\ \mbox{\hyperlink{application_8c_aca033d9c168f6eceec40a0e9a9354e79}{initialized}}\ =\ \mbox{\hyperlink{defines_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00071}\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{00071}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structapplication__state}{application\_state}}\ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00083}\mbox{\hyperlink{application_8c_af0ccecbeef900f30b0b734eb020574ef}{00083}}\ \mbox{\hyperlink{defines_8h_a7415f24c35cb3e16a79f143c5527fdfa}{b8}}\ \mbox{\hyperlink{application_8c_af0ccecbeef900f30b0b734eb020574ef}{application\_create}}(\mbox{\hyperlink{structgame}{game}}*\ game\_inst)\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00084}00084\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{application_8c_aca033d9c168f6eceec40a0e9a9354e79}{initialized}})\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00085}00085\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a473bb2cc3b3bf3c93084eeca6cb19132}{KERROR}}(\textcolor{stringliteral}{"{}application\_create()\ called\ more\ than\ once"{}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00086}00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{defines_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00087}00087\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00089}00089\ \ \ \ \ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_ae224fcec4853d590c4068314f75196c2}{game\_inst}}\ =\ game\_inst;}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00091}00091\ \ \ \ \ \textcolor{comment}{//\ Initialize\ Subsystem}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00092}00092\ \ \ \ \ \mbox{\hyperlink{logger_8c_aae701ec9fd1cbb624f28156730027305}{initialize\_logging}}();}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00094}00094\ \ \ \ \ \textcolor{comment}{//\ TO-\/DO:\ Remove\ this}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00095}00095\ \ \ \ \ \mbox{\hyperlink{logger_8h_a8eb60bd7b3dfc5cadc7364b06ce7bd07}{KFATAL}}(\textcolor{stringliteral}{"{}A\ test\ message:\ \%f"{}},\ 3.14f);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{logger_8h_a473bb2cc3b3bf3c93084eeca6cb19132}{KERROR}}(\textcolor{stringliteral}{"{}A\ test\ message:\ \%f"{}},\ 3.14f);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00097}00097\ \ \ \ \ \mbox{\hyperlink{logger_8h_a3e40140ad218fd4ef727b1a9009a1bea}{KWARN}}(\textcolor{stringliteral}{"{}A\ test\ message:\ \%f"{}},\ 3.14f);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00098}00098\ \ \ \ \ \mbox{\hyperlink{logger_8h_aaa79d2f465f4712163343e3d3052a200}{KINFO}}(\textcolor{stringliteral}{"{}A\ test\ message:\ \%f"{}},\ 3.14f);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00099}00099\ \ \ \ \ \mbox{\hyperlink{logger_8h_a23768ad708f2a648844bd09e15e52d1c}{KDEBUG}}(\textcolor{stringliteral}{"{}A\ test\ message:\ \%f"{}},\ 3.14f);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00100}00100\ \ \ \ \ \mbox{\hyperlink{logger_8h_a1871a1767ecd70d973893d36176a697f}{KTRACE}}(\textcolor{stringliteral}{"{}A\ test\ message:\ \%f"{}},\ 3.14f);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00101}00101\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00102}00102\ \ \ \ \ \textcolor{comment}{//\ Set\ initial\ application\ state}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00103}00103\ \ \ \ \ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a7c10d54c29174a16313dfc1992ccabde}{is\_running}}\ =\ \mbox{\hyperlink{defines_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00104}00104\ \ \ \ \ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a4e7125d95754ef0c0166479931eafcd1}{is\_suspended}}\ =\ \mbox{\hyperlink{defines_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00106}00106\ \ \ \ \ \textcolor{comment}{//\ Start\ platform\ layer}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00107}00107\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{platform_8h_a1557f29064029f8b437d0fbcc587ebbd}{platform\_startup}}(\&\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a14782a7e40b24efc8c814f786c6525ba}{platform}},\ game\_inst-\/>\mbox{\hyperlink{structgame_a12c0bdd534b736ca685c7ef91b17c80d}{app\_config}}.\mbox{\hyperlink{structapplication__config_ae1d05e78a3093693075c040d9a703366}{name}},\ game\_inst-\/>\mbox{\hyperlink{structgame_a12c0bdd534b736ca685c7ef91b17c80d}{app\_config}}.\mbox{\hyperlink{structapplication__config_abdaa5a7e7c0115c3c6d84ebcd052279c}{start\_pos\_x}},\ game\_inst-\/>\mbox{\hyperlink{structgame_a12c0bdd534b736ca685c7ef91b17c80d}{app\_config}}.\mbox{\hyperlink{structapplication__config_a40adc567d6986c0cb0e67ffd3ca95aa1}{start\_pos\_y}},\ game\_inst-\/>\mbox{\hyperlink{structgame_a12c0bdd534b736ca685c7ef91b17c80d}{app\_config}}.\mbox{\hyperlink{structapplication__config_a0fc9a6f3ed272fd04205fba11bb6545a}{start\_width}},\ game\_inst-\/>\mbox{\hyperlink{structgame_a12c0bdd534b736ca685c7ef91b17c80d}{app\_config}}.\mbox{\hyperlink{structapplication__config_ac68f9a14ef59ea92736d708a91ee90d6}{start\_height}}))\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00108}00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{defines_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00109}00109\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00111}00111\ \ \ \ \ \textcolor{comment}{//\ Initialize\ Game}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00112}00112\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_ae224fcec4853d590c4068314f75196c2}{game\_inst}}-\/>\mbox{\hyperlink{structgame_a5466af7e15d158c9a30a2c733514bc13}{initialize}}(\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_ae224fcec4853d590c4068314f75196c2}{game\_inst}}))\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a8eb60bd7b3dfc5cadc7364b06ce7bd07}{KFATAL}}(\textcolor{stringliteral}{"{}Game\ failed\ to\ initialize"{}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{defines_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00116}00116\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00118}00118\ \ \ \ \ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_ae224fcec4853d590c4068314f75196c2}{game\_inst}}-\/>\mbox{\hyperlink{structgame_a320793f814af5f889a43b7ab25d75b67}{on\_resize}}(\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_ae224fcec4853d590c4068314f75196c2}{game\_inst}},\ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a5c49a4da818b7bae26b50df80c889279}{width}},\ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a4a01899027b7429dce0fa6290b927f9c}{height}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00120}00120\ \ \ \ \ \mbox{\hyperlink{application_8c_aca033d9c168f6eceec40a0e9a9354e79}{initialized}}\ =\ \mbox{\hyperlink{defines_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00122}00122\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{defines_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00123}00123\ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00135}\mbox{\hyperlink{application_8c_a08c8575858e12aa5260a1cc0101df8bd}{00135}}\ \mbox{\hyperlink{defines_8h_a7415f24c35cb3e16a79f143c5527fdfa}{b8}}\ \mbox{\hyperlink{application_8c_a08c8575858e12aa5260a1cc0101df8bd}{application\_run}}()\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00136}00136\ \ \ \ \ \textcolor{comment}{//\ Log\ memory\ info\ -\/\ Memory\ Leak}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00137}00137\ \ \ \ \ \mbox{\hyperlink{logger_8h_aaa79d2f465f4712163343e3d3052a200}{KINFO}}(\mbox{\hyperlink{kmemory_8c_a952570f1b67855783413d2a0d4b0503a}{get\_memory\_usage\_str}}());}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00139}00139\ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a7c10d54c29174a16313dfc1992ccabde}{is\_running}})\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00140}00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{platform_8h_af47d0fad6d6e686e1e0f668c95b1c201}{platform\_pump\_messages}}(\&\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a14782a7e40b24efc8c814f786c6525ba}{platform}}))\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ platform\ request\ to\ quit,\ stop\ running}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a7c10d54c29174a16313dfc1992ccabde}{is\_running}}\ =\ \mbox{\hyperlink{defines_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00144}00144\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00145}00145\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00147}00147\ \ \ \ \ \textcolor{comment}{//\ Ensure\ running\ state\ is\ cleared}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00148}00148\ \ \ \ \ \mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a7c10d54c29174a16313dfc1992ccabde}{is\_running}}\ =\ \mbox{\hyperlink{defines_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00150}00150\ \ \ \ \ \textcolor{comment}{//\ Clean\ up\ platform\ resources}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00151}00151\ \ \ \ \ \mbox{\hyperlink{platform_8h_a7fe7553c63bc948e2ee04d15597d6ccd}{platform\_shutdown}}(\&\mbox{\hyperlink{application_8c_a07966d6dab79f2c8568f69a986ae8e68}{app\_state}}.\mbox{\hyperlink{structapplication__state_a14782a7e40b24efc8c814f786c6525ba}{platform}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00152}00152\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00153}00153\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{defines_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00154}00154\ \}}

\end{DoxyCode}
