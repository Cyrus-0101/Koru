\doxysection{engine/src/core/logger.c File Reference}
\hypertarget{logger_8c}{}\label{logger_8c}\index{engine/src/core/logger.c@{engine/src/core/logger.c}}


Implementation of the logging system.  


{\ttfamily \#include "{}logger.\+h"{}}\newline
{\ttfamily \#include "{}kmemory.\+h"{}}\newline
{\ttfamily \#include "{}kstring.\+h"{}}\newline
{\ttfamily \#include "{}platform/platform.\+h"{}}\newline
{\ttfamily \#include "{}platform/filesystem.\+h"{}}\newline
{\ttfamily \#include $<$stdarg.\+h$>$}\newline
Include dependency graph for logger.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{logger_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structlogger__system__state}{logger\+\_\+system\+\_\+state}}
\begin{DoxyCompactList}\small\item\em Tracks the state of the logging system. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{logger_8c_aa204ec58d846f2354e6bd239460db89f}{MSG\+\_\+\+LENGTH}}~32000
\begin{DoxyCompactList}\small\item\em Maximum length of a log message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structlogger__system__state}{logger\+\_\+system\+\_\+state}} \mbox{\hyperlink{logger_8c_ae29328f40e5eace9aeffeebfc1b93c09}{logger\+\_\+system\+\_\+state}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{logger_8c_ac215142da536869ac02894d0198bb88f}{append\+\_\+to\+\_\+log\+\_\+file}} (const char \texorpdfstring{$\ast$}{*}message)
\begin{DoxyCompactList}\small\item\em Appends a message to the log file. \end{DoxyCompactList}\item 
\mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} \mbox{\hyperlink{logger_8c_a124a9e558949da0e8f11f6929992a5c8}{initialize\+\_\+logging}} (\mbox{\hyperlink{defines_8h_ad758b7a5c3f18ed79d2fcd23d9f16357}{u64}} \texorpdfstring{$\ast$}{*}memory\+\_\+requirement, void \texorpdfstring{$\ast$}{*}state)
\begin{DoxyCompactList}\small\item\em Initializes the logging system. Called twice; once with state = 0 to get required memory size then a second time passing allocated memory to the state. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{logger_8c_aa19340b3c2c2f8f90a5c40d08b7919c7}{shutdown\+\_\+logging}} (void \texorpdfstring{$\ast$}{*}state)
\begin{DoxyCompactList}\small\item\em Shuts down the logging system. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{logger_8c_abdf99acf6ecc4a6fd2277e74ed3fd8c6}{log\+\_\+output}} (\mbox{\hyperlink{logger_8h_ac91d55174d383848b976a34de843748e}{log\+\_\+level}} level, const char \texorpdfstring{$\ast$}{*}message,...)
\begin{DoxyCompactList}\small\item\em Logs a formatted message at the specified log level. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{logger_8c_a89ca11b6142a42bebac099dfacf57f59}{report\+\_\+assertion\+\_\+failure}} (const char \texorpdfstring{$\ast$}{*}expression, const char \texorpdfstring{$\ast$}{*}message, const char \texorpdfstring{$\ast$}{*}file, \mbox{\hyperlink{defines_8h_a9e3ad5f8e752f01d926ce122d5a5285e}{i32}} line)
\begin{DoxyCompactList}\small\item\em Logs an assertion failure message to the logging system. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{structlogger__system__state}{logger\+\_\+system\+\_\+state}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{logger_8c_a78fb062cf70ff40ec53ede87b44ebb48}{state\+\_\+ptr}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of the logging system. 

Implements the logging functionality with color-\/coded terminal output, message formatting, and integration with platform-\/specific console writes.

Features\+:
\begin{DoxyItemize}
\item Level-\/based filtering
\item ANSI escape codes for color output
\item Platform abstraction for console output
\item Assertion failure handler 
\end{DoxyItemize}

Definition in file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



\doxysubsection{Macro Definition Documentation}
\Hypertarget{logger_8c_aa204ec58d846f2354e6bd239460db89f}\label{logger_8c_aa204ec58d846f2354e6bd239460db89f} 
\index{logger.c@{logger.c}!MSG\_LENGTH@{MSG\_LENGTH}}
\index{MSG\_LENGTH@{MSG\_LENGTH}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{MSG\_LENGTH}{MSG\_LENGTH}}
{\footnotesize\ttfamily \#define MSG\+\_\+\+LENGTH~32000}



Maximum length of a log message. 



Definition at line \mbox{\hyperlink{logger_8c_source_l00014}{14}} of file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



\doxysubsection{Typedef Documentation}
\Hypertarget{logger_8c_ae29328f40e5eace9aeffeebfc1b93c09}\label{logger_8c_ae29328f40e5eace9aeffeebfc1b93c09} 
\index{logger.c@{logger.c}!logger\_system\_state@{logger\_system\_state}}
\index{logger\_system\_state@{logger\_system\_state}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{logger\_system\_state}{logger\_system\_state}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structlogger__system__state}{logger\+\_\+system\+\_\+state}} \mbox{\hyperlink{structlogger__system__state}{logger\+\_\+system\+\_\+state}}}



\doxysubsection{Function Documentation}
\Hypertarget{logger_8c_ac215142da536869ac02894d0198bb88f}\label{logger_8c_ac215142da536869ac02894d0198bb88f} 
\index{logger.c@{logger.c}!append\_to\_log\_file@{append\_to\_log\_file}}
\index{append\_to\_log\_file@{append\_to\_log\_file}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{append\_to\_log\_file()}{append\_to\_log\_file()}}
{\footnotesize\ttfamily void append\+\_\+to\+\_\+log\+\_\+file (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{message }\end{DoxyParamCaption})}



Appends a message to the log file. 


\begin{DoxyParams}{Parameters}
{\em message} & The message to append. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{logger_8c_source_l00050}{50}} of file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



References \mbox{\hyperlink{filesystem_8c_source_l00117}{filesystem\+\_\+write()}}, \mbox{\hyperlink{filesystem_8h_source_l00023}{file\+\_\+handle\+::is\+\_\+valid}}, \mbox{\hyperlink{logger_8c_source_l00039}{logger\+\_\+system\+\_\+state\+::log\+\_\+file\+\_\+handle}}, \mbox{\hyperlink{logger_8h_source_l00071}{LOG\+\_\+\+LEVEL\+\_\+\+ERROR}}, \mbox{\hyperlink{platform_8h_adee3e77de1e3374a118e9ebc150c9800}{platform\+\_\+console\+\_\+write\+\_\+error()}}, \mbox{\hyperlink{logger_8c_source_l00043}{state\+\_\+ptr}}, and \mbox{\hyperlink{kstring_8c_source_l00023}{string\+\_\+length()}}.



Referenced by \mbox{\hyperlink{logger_8c_source_l00095}{log\+\_\+output()}}.

\Hypertarget{logger_8c_a124a9e558949da0e8f11f6929992a5c8}\label{logger_8c_a124a9e558949da0e8f11f6929992a5c8} 
\index{logger.c@{logger.c}!initialize\_logging@{initialize\_logging}}
\index{initialize\_logging@{initialize\_logging}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{initialize\_logging()}{initialize\_logging()}}
{\footnotesize\ttfamily \mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} initialize\+\_\+logging (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{defines_8h_ad758b7a5c3f18ed79d2fcd23d9f16357}{u64}} \texorpdfstring{$\ast$}{*}}]{memory\+\_\+requirement,  }\item[{void \texorpdfstring{$\ast$}{*}}]{state }\end{DoxyParamCaption})}



Initializes the logging system. Called twice; once with state = 0 to get required memory size then a second time passing allocated memory to the state. 

Allocates necessary resources and prepares the logging subsystem. This function should be called before any logging occurs.


\begin{DoxyParams}{Parameters}
{\em memory\+\_\+requirement} & Pointer to store the required memory size for the logging system. \\
\hline
{\em state} & Pointer to a pre-\/allocated memory block for the logger state. If NULL, no state is initialized. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if initialization was successful; False otherwise. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{logger_8c_source_l00064}{64}} of file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



References \mbox{\hyperlink{defines_8h_source_l00122}{False}}, \mbox{\hyperlink{filesystem_8h_source_l00035}{FILE\+\_\+\+MODE\+\_\+\+WRITE}}, \mbox{\hyperlink{filesystem_8c_source_l00023}{filesystem\+\_\+open()}}, \mbox{\hyperlink{logger_8c_source_l00039}{logger\+\_\+system\+\_\+state\+::log\+\_\+file\+\_\+handle}}, \mbox{\hyperlink{logger_8h_source_l00071}{LOG\+\_\+\+LEVEL\+\_\+\+ERROR}}, \mbox{\hyperlink{platform_8h_adee3e77de1e3374a118e9ebc150c9800}{platform\+\_\+console\+\_\+write\+\_\+error()}}, \mbox{\hyperlink{logger_8c_source_l00043}{state\+\_\+ptr}}, and \mbox{\hyperlink{defines_8h_source_l00120}{True}}.



Referenced by \mbox{\hyperlink{application_8c_source_l00183}{application\+\_\+create()}}.

\Hypertarget{logger_8c_abdf99acf6ecc4a6fd2277e74ed3fd8c6}\label{logger_8c_abdf99acf6ecc4a6fd2277e74ed3fd8c6} 
\index{logger.c@{logger.c}!log\_output@{log\_output}}
\index{log\_output@{log\_output}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{log\_output()}{log\_output()}}
{\footnotesize\ttfamily void log\+\_\+output (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{logger_8h_ac91d55174d383848b976a34de843748e}{log\+\_\+level}}}]{level,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{message,  }\item[{}]{... }\end{DoxyParamCaption})}



Logs a formatted message at the specified log level. 

Supports standard formatting like {\ttfamily printf()} and includes\+:
\begin{DoxyItemize}
\item Level prefixing (e.\+g., "{}\mbox{[}\+INFO\mbox{]}\+: "{})
\item Color coding based on severity (if supported by terminal)
\item Platform-\/specific output routing
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em level} & The severity level of the message (e.\+g., LOG\+\_\+\+LEVEL\+\_\+\+DEBUG). \\
\hline
{\em message} & A format string similar to {\ttfamily printf()}. \\
\hline
{\em ...} & Arguments used to replace format specifiers in the message. \\
\hline
\end{DoxyParams}
TO-\/\+DO\+: Move string operations to their own thread The ops are pretty slow, and can slow down the engine during startup/shutdown. Work on threading and offset these ops.

Definition at line \mbox{\hyperlink{logger_8c_source_l00095}{95}} of file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



References \mbox{\hyperlink{logger_8c_source_l00050}{append\+\_\+to\+\_\+log\+\_\+file()}}, \mbox{\hyperlink{kmemory_8c_source_l00170}{kzero\+\_\+memory()}}, \mbox{\hyperlink{logger_8h_source_l00078}{LOG\+\_\+\+LEVEL\+\_\+\+WARN}}, \mbox{\hyperlink{logger_8c_source_l00014}{MSG\+\_\+\+LENGTH}}, \mbox{\hyperlink{platform_8h_ac352c68fed21ee19eff9a165d1648c4c}{platform\+\_\+console\+\_\+write()}}, \mbox{\hyperlink{platform_8h_adee3e77de1e3374a118e9ebc150c9800}{platform\+\_\+console\+\_\+write\+\_\+error()}}, \mbox{\hyperlink{kstring_8c_source_l00041}{string\+\_\+format()}}, and \mbox{\hyperlink{kstring_8c_source_l00052}{string\+\_\+format\+\_\+v()}}.



Referenced by \mbox{\hyperlink{logger_8c_source_l00156}{report\+\_\+assertion\+\_\+failure()}}.

\Hypertarget{logger_8c_a89ca11b6142a42bebac099dfacf57f59}\label{logger_8c_a89ca11b6142a42bebac099dfacf57f59} 
\index{logger.c@{logger.c}!report\_assertion\_failure@{report\_assertion\_failure}}
\index{report\_assertion\_failure@{report\_assertion\_failure}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{report\_assertion\_failure()}{report\_assertion\_failure()}}
{\footnotesize\ttfamily void report\+\_\+assertion\+\_\+failure (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{expression,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{message,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{file,  }\item[{\mbox{\hyperlink{defines_8h_a9e3ad5f8e752f01d926ce122d5a5285e}{i32}}}]{line }\end{DoxyParamCaption})}



Logs an assertion failure message to the logging system. 

This function should be implemented in {\ttfamily \doxylink{logger_8c}{logger.\+c}} or another source file. It is called internally by the assertion macros when a condition fails.


\begin{DoxyParams}{Parameters}
{\em expression} & The stringified failed condition (e.\+g., {\ttfamily "{}x != NULL"{}}). \\
\hline
{\em message} & Optional additional context about the assertion. \\
\hline
{\em file} & The source file where the assertion occurred. \\
\hline
{\em line} & The line number in the source file. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{logger_8c_source_l00156}{156}} of file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



References \mbox{\hyperlink{logger_8h_source_l00064}{LOG\+\_\+\+LEVEL\+\_\+\+FATAL}}, and \mbox{\hyperlink{logger_8c_source_l00095}{log\+\_\+output()}}.

\Hypertarget{logger_8c_aa19340b3c2c2f8f90a5c40d08b7919c7}\label{logger_8c_aa19340b3c2c2f8f90a5c40d08b7919c7} 
\index{logger.c@{logger.c}!shutdown\_logging@{shutdown\_logging}}
\index{shutdown\_logging@{shutdown\_logging}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{shutdown\_logging()}{shutdown\_logging()}}
{\footnotesize\ttfamily void shutdown\+\_\+logging (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{state }\end{DoxyParamCaption})}



Shuts down the logging system. 

Currently just returns. In future versions, this may include\+:
\begin{DoxyItemize}
\item Flushing buffered logs
\item Closing log files
\item Releasing logging resources 
\end{DoxyItemize}

Definition at line \mbox{\hyperlink{logger_8c_source_l00085}{85}} of file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



References \mbox{\hyperlink{logger_8c_source_l00043}{state\+\_\+ptr}}.



\doxysubsection{Variable Documentation}
\Hypertarget{logger_8c_a78fb062cf70ff40ec53ede87b44ebb48}\label{logger_8c_a78fb062cf70ff40ec53ede87b44ebb48} 
\index{logger.c@{logger.c}!state\_ptr@{state\_ptr}}
\index{state\_ptr@{state\_ptr}!logger.c@{logger.c}}
\doxysubsubsection{\texorpdfstring{state\_ptr}{state\_ptr}}
{\footnotesize\ttfamily \mbox{\hyperlink{structlogger__system__state}{logger\+\_\+system\+\_\+state}}\texorpdfstring{$\ast$}{*} state\+\_\+ptr\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{logger_8c_source_l00043}{43}} of file \mbox{\hyperlink{logger_8c_source}{logger.\+c}}.



Referenced by \mbox{\hyperlink{logger_8c_source_l00050}{append\+\_\+to\+\_\+log\+\_\+file()}}, \mbox{\hyperlink{logger_8c_source_l00064}{initialize\+\_\+logging()}}, and \mbox{\hyperlink{logger_8c_source_l00085}{shutdown\+\_\+logging()}}.

