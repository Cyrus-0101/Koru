\doxysection{testbed/src/game.c File Reference}
\hypertarget{game_8c}{}\label{game_8c}\index{testbed/src/game.c@{testbed/src/game.c}}


Implementation of the testbed game logic.  


{\ttfamily \#include "{}game.\+h"{}}\newline
{\ttfamily \#include $<$core/event.\+h$>$}\newline
{\ttfamily \#include "{}core/input.\+h"{}}\newline
{\ttfamily \#include "{}core/kmemory.\+h"{}}\newline
{\ttfamily \#include $<$core/logger.\+h$>$}\newline
{\ttfamily \#include $<$math/kmath.\+h$>$}\newline
{\ttfamily \#include $<$renderer/renderer\+\_\+frontend.\+h$>$}\newline
Include dependency graph for game.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{game_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{game_8c_afc59a90b0ff1463ae2ab8f62aaeba221}{recalculate\+\_\+view\+\_\+matrix}} (\mbox{\hyperlink{structgame__state}{game\+\_\+state}} \texorpdfstring{$\ast$}{*}state)
\item 
void \mbox{\hyperlink{game_8c_af44de3f4336993330c9c3f264effb6d5}{camera\+\_\+pitch}} (\mbox{\hyperlink{structgame__state}{game\+\_\+state}} \texorpdfstring{$\ast$}{*}state, \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}} amount)
\item 
void \mbox{\hyperlink{game_8c_a0fb9410089eee00294c7bc231e8b23b3}{camera\+\_\+yaw}} (\mbox{\hyperlink{structgame__state}{game\+\_\+state}} \texorpdfstring{$\ast$}{*}state, \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}} amount)
\item 
\mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} \mbox{\hyperlink{game_8c_ab56d8511d5b55e40d88999e59fe8084e}{game\+\_\+initialize}} (\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}game\+\_\+inst)
\begin{DoxyCompactList}\small\item\em Initializes the game instance. \end{DoxyCompactList}\item 
\mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} \mbox{\hyperlink{game_8c_a1a612ae5a139848e80e1f7ddec49fdcf}{game\+\_\+update}} (\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}game\+\_\+inst, \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}} delta\+\_\+time)
\begin{DoxyCompactList}\small\item\em Updates the game state each frame. \end{DoxyCompactList}\item 
\mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} \mbox{\hyperlink{game_8c_aaa5f574e90e6577a78fbe8f01902525b}{game\+\_\+render}} (\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}game\+\_\+inst, \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}} delta\+\_\+time)
\begin{DoxyCompactList}\small\item\em Renders the game each frame. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{game_8c_a5b4ce7177edb36b28a89471589432d17}{game\+\_\+on\+\_\+resize}} (\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}game\+\_\+inst, \mbox{\hyperlink{defines_8h_a10e94b422ef0c20dcdec20d31a1f5049}{u32}} width, \mbox{\hyperlink{defines_8h_a10e94b422ef0c20dcdec20d31a1f5049}{u32}} height)
\begin{DoxyCompactList}\small\item\em Handles window resize events. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of the testbed game logic. 

Contains placeholder implementations for the core game functions\+:
\begin{DoxyItemize}
\item Initialization ({\ttfamily game\+\_\+initialize})
\item Frame update ({\ttfamily game\+\_\+update})
\item Rendering ({\ttfamily game\+\_\+render})
\item Resize handling ({\ttfamily game\+\_\+on\+\_\+resize})
\end{DoxyItemize}

Can be extended to add real gameplay features. 

Definition in file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{game_8c_af44de3f4336993330c9c3f264effb6d5}\label{game_8c_af44de3f4336993330c9c3f264effb6d5} 
\index{game.c@{game.c}!camera\_pitch@{camera\_pitch}}
\index{camera\_pitch@{camera\_pitch}!game.c@{game.c}}
\doxysubsubsection{\texorpdfstring{camera\_pitch()}{camera\_pitch()}}
{\footnotesize\ttfamily void camera\+\_\+pitch (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structgame__state}{game\+\_\+state}} \texorpdfstring{$\ast$}{*}}]{state,  }\item[{\mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}}]{amount }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{game_8c_source_l00041}{41}} of file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



References \mbox{\hyperlink{game_8h_source_l00046}{game\+\_\+state\+::camera\+\_\+euler}}, \mbox{\hyperlink{game_8h_source_l00048}{game\+\_\+state\+::camera\+\_\+view\+\_\+dirty}}, \mbox{\hyperlink{kmath_8h_source_l01537}{deg\+\_\+to\+\_\+rad()}}, \mbox{\hyperlink{defines_8h_source_l00295}{KCLAMP}}, \mbox{\hyperlink{defines_8h_source_l00120}{True}}, and \mbox{\hyperlink{math__types_8h_source_l00068}{vec3\+\_\+u\+::x}}.



Referenced by \mbox{\hyperlink{game_8c_source_l00094}{game\+\_\+update()}}.

\Hypertarget{game_8c_a0fb9410089eee00294c7bc231e8b23b3}\label{game_8c_a0fb9410089eee00294c7bc231e8b23b3} 
\index{game.c@{game.c}!camera\_yaw@{camera\_yaw}}
\index{camera\_yaw@{camera\_yaw}!game.c@{game.c}}
\doxysubsubsection{\texorpdfstring{camera\_yaw()}{camera\_yaw()}}
{\footnotesize\ttfamily void camera\+\_\+yaw (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structgame__state}{game\+\_\+state}} \texorpdfstring{$\ast$}{*}}]{state,  }\item[{\mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}}]{amount }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{game_8c_source_l00051}{51}} of file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



References \mbox{\hyperlink{game_8h_source_l00046}{game\+\_\+state\+::camera\+\_\+euler}}, \mbox{\hyperlink{game_8h_source_l00048}{game\+\_\+state\+::camera\+\_\+view\+\_\+dirty}}, \mbox{\hyperlink{defines_8h_source_l00120}{True}}, and \mbox{\hyperlink{math__types_8h_source_l00072}{vec3\+\_\+u\+::y}}.



Referenced by \mbox{\hyperlink{game_8c_source_l00094}{game\+\_\+update()}}.

\Hypertarget{game_8c_ab56d8511d5b55e40d88999e59fe8084e}\label{game_8c_ab56d8511d5b55e40d88999e59fe8084e} 
\index{game.c@{game.c}!game\_initialize@{game\_initialize}}
\index{game\_initialize@{game\_initialize}!game.c@{game.c}}
\doxysubsubsection{\texorpdfstring{game\_initialize()}{game\_initialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} game\+\_\+initialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}}]{game\+\_\+inst }\end{DoxyParamCaption})}



Initializes the game instance. 

Called when the game instance is initialized.

Currently just logs a debug message, but should be extended to initialize\+:
\begin{DoxyItemize}
\item Renderer
\item Input system
\item Game world
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em game\+\_\+inst} & A pointer to the current game instance. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if initialization succeeded; False otherwise. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{game_8c_source_l00067}{67}} of file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



References \mbox{\hyperlink{game_8h_source_l00046}{game\+\_\+state\+::camera\+\_\+euler}}, \mbox{\hyperlink{game_8h_source_l00041}{game\+\_\+state\+::camera\+\_\+position}}, \mbox{\hyperlink{game_8h_source_l00048}{game\+\_\+state\+::camera\+\_\+view\+\_\+dirty}}, \mbox{\hyperlink{logger_8h_source_l00213}{KDEBUG}}, \mbox{\hyperlink{kmath_8h_source_l01027}{mat4\+\_\+inverse()}}, \mbox{\hyperlink{kmath_8h_source_l01091}{mat4\+\_\+translation()}}, \mbox{\hyperlink{game__types_8h_source_l00064}{game\+::state}}, \mbox{\hyperlink{defines_8h_source_l00120}{True}}, \mbox{\hyperlink{kmath_8h_source_l00383}{vec3\+\_\+zero()}}, and \mbox{\hyperlink{game_8h_source_l00036}{game\+\_\+state\+::view}}.



Referenced by \mbox{\hyperlink{entry_8c_source_l00020}{create\+\_\+game()}}.

\Hypertarget{game_8c_a5b4ce7177edb36b28a89471589432d17}\label{game_8c_a5b4ce7177edb36b28a89471589432d17} 
\index{game.c@{game.c}!game\_on\_resize@{game\_on\_resize}}
\index{game\_on\_resize@{game\_on\_resize}!game.c@{game.c}}
\doxysubsubsection{\texorpdfstring{game\_on\_resize()}{game\_on\_resize()}}
{\footnotesize\ttfamily void game\+\_\+on\+\_\+resize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}}]{game\+\_\+inst,  }\item[{\mbox{\hyperlink{defines_8h_a10e94b422ef0c20dcdec20d31a1f5049}{u32}}}]{width,  }\item[{\mbox{\hyperlink{defines_8h_a10e94b422ef0c20dcdec20d31a1f5049}{u32}}}]{height }\end{DoxyParamCaption})}



Handles window resize events. 

Called when the window is resized.

Currently does nothing, but should be extended to\+:
\begin{DoxyItemize}
\item Update viewport dimensions
\item Recalculate aspect ratios
\item Resize framebuffers or shadow maps
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em game\+\_\+inst} & A pointer to the current game instance. \\
\hline
{\em width} & New width of the window client area. \\
\hline
{\em height} & New height of the window client area. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{game_8c_source_l00209}{209}} of file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



Referenced by \mbox{\hyperlink{entry_8c_source_l00020}{create\+\_\+game()}}.

\Hypertarget{game_8c_aaa5f574e90e6577a78fbe8f01902525b}\label{game_8c_aaa5f574e90e6577a78fbe8f01902525b} 
\index{game.c@{game.c}!game\_render@{game\_render}}
\index{game\_render@{game\_render}!game.c@{game.c}}
\doxysubsubsection{\texorpdfstring{game\_render()}{game\_render()}}
{\footnotesize\ttfamily \mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} game\+\_\+render (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}}]{game\+\_\+inst,  }\item[{\mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}}]{delta\+\_\+time }\end{DoxyParamCaption})}



Renders the game each frame. 

Called every frame to render the game.

Currently a placeholder; this would normally handle\+:
\begin{DoxyItemize}
\item Drawing geometry
\item Updating shaders
\item Rendering UI
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em game\+\_\+inst} & A pointer to the current game instance. \\
\hline
{\em delta\+\_\+time} & Time in seconds since the last frame. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if rendering succeeded; False on unrecoverable error. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{game_8c_source_l00193}{193}} of file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



References \mbox{\hyperlink{defines_8h_source_l00120}{True}}.



Referenced by \mbox{\hyperlink{entry_8c_source_l00020}{create\+\_\+game()}}.

\Hypertarget{game_8c_a1a612ae5a139848e80e1f7ddec49fdcf}\label{game_8c_a1a612ae5a139848e80e1f7ddec49fdcf} 
\index{game.c@{game.c}!game\_update@{game\_update}}
\index{game\_update@{game\_update}!game.c@{game.c}}
\doxysubsubsection{\texorpdfstring{game\_update()}{game\_update()}}
{\footnotesize\ttfamily \mbox{\hyperlink{defines_8h_a3a58feb08f4f45ee137ec358217c3270}{b8}} game\+\_\+update (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structgame}{game}} \texorpdfstring{$\ast$}{*}}]{game\+\_\+inst,  }\item[{\mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}}]{delta\+\_\+time }\end{DoxyParamCaption})}



Updates the game state each frame. 

Called every frame to update game logic.

Currently a placeholder; this would normally handle\+:
\begin{DoxyItemize}
\item Input processing
\item Game logic updates
\item Physics simulation
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em game\+\_\+inst} & A pointer to the current game instance. \\
\hline
{\em delta\+\_\+time} & Time in seconds since the last frame. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if update succeeded; False to request application exit. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{game_8c_source_l00094}{94}} of file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



References \mbox{\hyperlink{game_8c_source_l00041}{camera\+\_\+pitch()}}, \mbox{\hyperlink{game_8h_source_l00041}{game\+\_\+state\+::camera\+\_\+position}}, \mbox{\hyperlink{game_8h_source_l00048}{game\+\_\+state\+::camera\+\_\+view\+\_\+dirty}}, \mbox{\hyperlink{game_8c_source_l00051}{camera\+\_\+yaw()}}, \mbox{\hyperlink{vulkan__backend_8c_source_l00035}{context}}, \mbox{\hyperlink{event_8h_source_l00222}{EVENT\+\_\+\+CODE\+\_\+\+DEBUG0}}, \mbox{\hyperlink{event_8c_source_l00150}{event\+\_\+fire()}}, \mbox{\hyperlink{kmemory_8c_source_l00244}{get\+\_\+memory\+\_\+alloc\+\_\+count()}}, \mbox{\hyperlink{input_8c_source_l00241}{input\+\_\+is\+\_\+key\+\_\+down()}}, \mbox{\hyperlink{input_8c_source_l00254}{input\+\_\+is\+\_\+key\+\_\+up()}}, \mbox{\hyperlink{input_8c_source_l00269}{input\+\_\+was\+\_\+key\+\_\+down()}}, \mbox{\hyperlink{input_8c_source_l00284}{input\+\_\+was\+\_\+key\+\_\+up()}}, \mbox{\hyperlink{logger_8h_source_l00213}{KDEBUG}}, \mbox{\hyperlink{kmath_8h_source_l01206}{mat4\+\_\+backward()}}, \mbox{\hyperlink{kmath_8h_source_l01191}{mat4\+\_\+forward()}}, \mbox{\hyperlink{kmath_8h_source_l01251}{mat4\+\_\+left()}}, \mbox{\hyperlink{kmath_8h_source_l01266}{mat4\+\_\+right()}}, \mbox{\hyperlink{game_8c_source_l00029}{recalculate\+\_\+view\+\_\+matrix()}}, \mbox{\hyperlink{renderer__frontend_8c_source_l00246}{renderer\+\_\+set\+\_\+view()}}, \mbox{\hyperlink{game__types_8h_source_l00064}{game\+::state}}, \mbox{\hyperlink{defines_8h_source_l00120}{True}}, \mbox{\hyperlink{kmath_8h_source_l00443}{vec3\+\_\+add()}}, \mbox{\hyperlink{kmath_8h_source_l00589}{vec3\+\_\+compare()}}, \mbox{\hyperlink{kmath_8h_source_l00531}{vec3\+\_\+normalize()}}, \mbox{\hyperlink{kmath_8h_source_l00383}{vec3\+\_\+zero()}}, \mbox{\hyperlink{game_8h_source_l00036}{game\+\_\+state\+::view}}, \mbox{\hyperlink{math__types_8h_source_l00068}{vec3\+\_\+u\+::x}}, \mbox{\hyperlink{math__types_8h_source_l00072}{vec3\+\_\+u\+::y}}, and \mbox{\hyperlink{math__types_8h_source_l00076}{vec3\+\_\+u\+::z}}.



Referenced by \mbox{\hyperlink{entry_8c_source_l00020}{create\+\_\+game()}}.

\Hypertarget{game_8c_afc59a90b0ff1463ae2ab8f62aaeba221}\label{game_8c_afc59a90b0ff1463ae2ab8f62aaeba221} 
\index{game.c@{game.c}!recalculate\_view\_matrix@{recalculate\_view\_matrix}}
\index{recalculate\_view\_matrix@{recalculate\_view\_matrix}!game.c@{game.c}}
\doxysubsubsection{\texorpdfstring{recalculate\_view\_matrix()}{recalculate\_view\_matrix()}}
{\footnotesize\ttfamily void recalculate\+\_\+view\+\_\+matrix (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structgame__state}{game\+\_\+state}} \texorpdfstring{$\ast$}{*}}]{state }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{game_8c_source_l00029}{29}} of file \mbox{\hyperlink{game_8c_source}{game.\+c}}.



References \mbox{\hyperlink{game_8h_source_l00046}{game\+\_\+state\+::camera\+\_\+euler}}, \mbox{\hyperlink{game_8h_source_l00041}{game\+\_\+state\+::camera\+\_\+position}}, \mbox{\hyperlink{game_8h_source_l00048}{game\+\_\+state\+::camera\+\_\+view\+\_\+dirty}}, \mbox{\hyperlink{defines_8h_source_l00122}{False}}, \mbox{\hyperlink{kmath_8h_source_l01176}{mat4\+\_\+euler\+\_\+xyz()}}, \mbox{\hyperlink{kmath_8h_source_l01027}{mat4\+\_\+inverse()}}, \mbox{\hyperlink{kmath_8h_source_l00883}{mat4\+\_\+mul()}}, \mbox{\hyperlink{kmath_8h_source_l01091}{mat4\+\_\+translation()}}, \mbox{\hyperlink{game_8h_source_l00036}{game\+\_\+state\+::view}}, \mbox{\hyperlink{math__types_8h_source_l00068}{vec3\+\_\+u\+::x}}, \mbox{\hyperlink{math__types_8h_source_l00072}{vec3\+\_\+u\+::y}}, and \mbox{\hyperlink{math__types_8h_source_l00076}{vec3\+\_\+u\+::z}}.



Referenced by \mbox{\hyperlink{game_8c_source_l00094}{game\+\_\+update()}}.

