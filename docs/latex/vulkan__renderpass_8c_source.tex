\doxysection{vulkan\+\_\+renderpass.\+c}
\hypertarget{vulkan__renderpass_8c_source}{}\label{vulkan__renderpass_8c_source}\index{engine/src/renderer/vulkan/vulkan\_renderpass.c@{engine/src/renderer/vulkan/vulkan\_renderpass.c}}
\mbox{\hyperlink{vulkan__renderpass_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{kmemory_8h}{core/kmemory.h}}"{}}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vulkan__renderpass_8h}{vulkan\_renderpass.h}}"{}}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00004}\mbox{\hyperlink{vulkan__renderpass_8c_a37321a6dab9f6bb0a8d877e0b15e4fed}{00004}}\ \textcolor{preprocessor}{\#define\ ATTACHMENT\_DESCRIPTION\_COUNT\ 2}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00043}\mbox{\hyperlink{vulkan__renderpass_8c_a6cb37ba96525608948661a9a41a15506}{00043}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{vulkan__renderpass_8c_a6cb37ba96525608948661a9a41a15506}{vulkan\_renderpass\_create}}(}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00044}00044\ \ \ \ \ vulkan\_context*\ \mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}},}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00045}00045\ \ \ \ \ vulkan\_renderpass*\ out\_renderpass,}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00046}00046\ \ \ \ \ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ x,\ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ y,\ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ w,\ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ h,}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00047}00047\ \ \ \ \ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ r,\ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ g,\ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ b,\ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ a,}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00048}00048\ \ \ \ \ \mbox{\hyperlink{defines_8h_a5f6906312a689f27d70e9d086649d3fd}{f32}}\ depth,}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00049}00049\ \ \ \ \ \mbox{\hyperlink{defines_8h_a10e94b422ef0c20dcdec20d31a1f5049}{u32}}\ stencil)\ \{}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00051}00051\ \ \ \ \ \textcolor{comment}{//\ Copy\ viewport\ and\ clear\ values\ from\ input}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00052}00052\ \ \ \ \ out\_renderpass-\/>x\ =\ x;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00053}00053\ \ \ \ \ out\_renderpass-\/>y\ =\ y;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00054}00054\ \ \ \ \ out\_renderpass-\/>w\ =\ w;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00055}00055\ \ \ \ \ out\_renderpass-\/>h\ =\ h;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00057}00057\ \ \ \ \ out\_renderpass-\/>r\ =\ r;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00058}00058\ \ \ \ \ out\_renderpass-\/>g\ =\ g;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00059}00059\ \ \ \ \ out\_renderpass-\/>b\ =\ b;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00060}00060\ \ \ \ \ out\_renderpass-\/>a\ =\ a;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00062}00062\ \ \ \ \ out\_renderpass-\/>depth\ =\ depth;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00063}00063\ \ \ \ \ out\_renderpass-\/>stencil\ =\ stencil;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00065}00065\ \ \ \ \ \textcolor{comment}{//\ Main\ Subpass\ setup}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00066}00066\ \ \ \ \ VkSubpassDescription\ subpass\ =\ \{\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00067}00067\ \ \ \ \ subpass.pipelineBindPoint\ =\ VK\_PIPELINE\_BIND\_POINT\_GRAPHICS;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00069}00069\ \ \ \ \ \textcolor{comment}{//\ Attachment\ Descriptions.\ TODO:\ make\ this\ configurable.}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00070}00070\ \ \ \ \ VkAttachmentDescription\ attachment\_descriptions[\mbox{\hyperlink{vulkan__renderpass_8c_a37321a6dab9f6bb0a8d877e0b15e4fed}{ATTACHMENT\_DESCRIPTION\_COUNT}}];}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00072}00072\ \ \ \ \ \textcolor{comment}{//\ Color\ attachment\ description}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00073}00073\ \ \ \ \ VkAttachmentDescription\ color\_attachment\ =\ \{\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00074}00074\ \ \ \ \ color\_attachment.format\ =\ \mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}}-\/>swapchain.image\_format.format;\ \textcolor{comment}{//\ TODO:\ Make\ configurable}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00075}00075\ \ \ \ \ color\_attachment.samples\ =\ VK\_SAMPLE\_COUNT\_1\_BIT;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00076}00076\ \ \ \ \ color\_attachment.loadOp\ =\ VK\_ATTACHMENT\_LOAD\_OP\_CLEAR;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00077}00077\ \ \ \ \ color\_attachment.storeOp\ =\ VK\_ATTACHMENT\_STORE\_OP\_STORE;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00078}00078\ \ \ \ \ color\_attachment.stencilLoadOp\ =\ VK\_ATTACHMENT\_LOAD\_OP\_DONT\_CARE;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00079}00079\ \ \ \ \ color\_attachment.stencilStoreOp\ =\ VK\_ATTACHMENT\_STORE\_OP\_DONT\_CARE;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00080}00080\ \ \ \ \ color\_attachment.initialLayout\ =\ VK\_IMAGE\_LAYOUT\_UNDEFINED;\ \textcolor{comment}{//\ Do\ not\ expect\ any\ particular\ layout\ before\ render\ pass\ starts.}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00081}00081\ \ \ \ \ color\_attachment.finalLayout\ =\ VK\_IMAGE\_LAYOUT\_PRESENT\_SRC\_KHR;\ \textcolor{comment}{//\ Transitioned\ to\ after\ the\ render\ pass}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00082}00082\ \ \ \ \ color\_attachment.flags\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00084}00084\ \ \ \ \ attachment\_descriptions[0]\ =\ color\_attachment;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00086}00086\ \ \ \ \ \textcolor{comment}{//\ Depth\ attachment\ description}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00087}00087\ \ \ \ \ VkAttachmentDescription\ depth\_attachment\ =\ \{\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00088}00088\ \ \ \ \ depth\_attachment.format\ =\ \mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}}-\/>device.depth\_format;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00089}00089\ \ \ \ \ depth\_attachment.samples\ =\ VK\_SAMPLE\_COUNT\_1\_BIT;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00090}00090\ \ \ \ \ depth\_attachment.loadOp\ =\ VK\_ATTACHMENT\_LOAD\_OP\_CLEAR;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00091}00091\ \ \ \ \ depth\_attachment.storeOp\ =\ VK\_ATTACHMENT\_STORE\_OP\_DONT\_CARE;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00092}00092\ \ \ \ \ depth\_attachment.stencilLoadOp\ =\ VK\_ATTACHMENT\_LOAD\_OP\_DONT\_CARE;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00093}00093\ \ \ \ \ depth\_attachment.stencilStoreOp\ =\ VK\_ATTACHMENT\_STORE\_OP\_DONT\_CARE;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00094}00094\ \ \ \ \ depth\_attachment.initialLayout\ =\ VK\_IMAGE\_LAYOUT\_UNDEFINED;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00095}00095\ \ \ \ \ depth\_attachment.finalLayout\ =\ VK\_IMAGE\_LAYOUT\_DEPTH\_STENCIL\_ATTACHMENT\_OPTIMAL;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00096}00096\ \ \ \ \ depth\_attachment.flags\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00098}00098\ \ \ \ \ attachment\_descriptions[1]\ =\ depth\_attachment;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00099}00099\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00100}00100\ \ \ \ \ \textcolor{comment}{//\ Color\ attachment\ reference}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00101}00101\ \ \ \ \ VkAttachmentReference\ color\_attachment\_reference\ =\ \{\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00102}00102\ \ \ \ \ color\_attachment\_reference.attachment\ =\ 0;\ \ \textcolor{comment}{//\ Index\ into\ pAttachments\ array}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00103}00103\ \ \ \ \ color\_attachment\_reference.layout\ =\ VK\_IMAGE\_LAYOUT\_COLOR\_ATTACHMENT\_OPTIMAL;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00104}00104\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00105}00105\ \ \ \ \ subpass.colorAttachmentCount\ =\ 1;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00106}00106\ \ \ \ \ subpass.pColorAttachments\ =\ \&color\_attachment\_reference;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00108}00108\ \ \ \ \ \textcolor{comment}{//\ Depth/stencil\ attachment\ reference}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00109}00109\ \ \ \ \ VkAttachmentReference\ depth\_attachment\_reference\ =\ \{\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00110}00110\ \ \ \ \ depth\_attachment\_reference.attachment\ =\ 1;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00111}00111\ \ \ \ \ depth\_attachment\_reference.layout\ =\ VK\_IMAGE\_LAYOUT\_DEPTH\_STENCIL\_ATTACHMENT\_OPTIMAL;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00113}00113\ \ \ \ \ subpass.pDepthStencilAttachment\ =\ \&depth\_attachment\_reference;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00115}00115\ \ \ \ \ \textcolor{comment}{//\ Input\ attachment\ count\ (not\ used\ yet)}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00116}00116\ \ \ \ \ subpass.inputAttachmentCount\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00117}00117\ \ \ \ \ subpass.pInputAttachments\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00119}00119\ \ \ \ \ \textcolor{comment}{//\ Resolve\ attachments\ for\ multisampling\ (not\ used\ yet)}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00120}00120\ \ \ \ \ subpass.pResolveAttachments\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00122}00122\ \ \ \ \ \textcolor{comment}{//\ Preserve\ attachments\ between\ subpasses\ (not\ used\ yet)}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00123}00123\ \ \ \ \ subpass.preserveAttachmentCount\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00124}00124\ \ \ \ \ subpass.pPreserveAttachments\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00126}00126\ \ \ \ \ \textcolor{comment}{//\ Render\ pass\ dependency\ (transition\ from\ outside\ to\ first\ subpass)}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00127}00127\ \ \ \ \ VkSubpassDependency\ dependency\ =\ \{\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00128}00128\ \ \ \ \ dependency.srcSubpass\ =\ VK\_SUBPASS\_EXTERNAL;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00129}00129\ \ \ \ \ dependency.dstSubpass\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00130}00130\ \ \ \ \ dependency.srcStageMask\ =\ VK\_PIPELINE\_STAGE\_COLOR\_ATTACHMENT\_OUTPUT\_BIT;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00131}00131\ \ \ \ \ dependency.dstStageMask\ =\ VK\_PIPELINE\_STAGE\_COLOR\_ATTACHMENT\_OUTPUT\_BIT;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00132}00132\ \ \ \ \ dependency.srcAccessMask\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00133}00133\ \ \ \ \ dependency.dstAccessMask\ =\ VK\_ACCESS\_COLOR\_ATTACHMENT\_READ\_BIT\ |\ VK\_ACCESS\_COLOR\_ATTACHMENT\_WRITE\_BIT;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00134}00134\ \ \ \ \ dependency.dependencyFlags\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00135}00135\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00136}00136\ \ \ \ \ \textcolor{comment}{//\ Build\ render\ pass\ create\ info}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00137}00137\ \ \ \ \ VkRenderPassCreateInfo\ render\_pass\_create\_info\ =\ \{VK\_STRUCTURE\_TYPE\_RENDER\_PASS\_CREATE\_INFO\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00138}00138\ \ \ \ \ render\_pass\_create\_info.attachmentCount\ =\ \mbox{\hyperlink{vulkan__renderpass_8c_a37321a6dab9f6bb0a8d877e0b15e4fed}{ATTACHMENT\_DESCRIPTION\_COUNT}};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00139}00139\ \ \ \ \ render\_pass\_create\_info.pAttachments\ =\ attachment\_descriptions;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00140}00140\ \ \ \ \ render\_pass\_create\_info.subpassCount\ =\ 1;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00141}00141\ \ \ \ \ render\_pass\_create\_info.pSubpasses\ =\ \&subpass;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00142}00142\ \ \ \ \ render\_pass\_create\_info.dependencyCount\ =\ 1;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00143}00143\ \ \ \ \ render\_pass\_create\_info.pDependencies\ =\ \&dependency;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00144}00144\ \ \ \ \ render\_pass\_create\_info.pNext\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00145}00145\ \ \ \ \ render\_pass\_create\_info.flags\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00147}00147\ \ \ \ \ \textcolor{comment}{//\ Create\ the\ render\ pass}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00148}00148\ \ \ \ \ VK\_CHECK(vkCreateRenderPass(\mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}}-\/>device.logical\_device,\ \&render\_pass\_create\_info,\ \mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}}-\/>allocator,\ \&out\_renderpass-\/>handle));}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00149}00149\ \}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00159}\mbox{\hyperlink{vulkan__renderpass_8c_a2656c53811b44888152b5a19f7ece679}{00159}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{vulkan__renderpass_8c_a2656c53811b44888152b5a19f7ece679}{vulkan\_renderpass\_destroy}}(vulkan\_context*\ \mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}},\ vulkan\_renderpass*\ renderpass)\ \{}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00160}00160\ \ \ \ \ \textcolor{keywordflow}{if}\ (renderpass\ \&\&\ renderpass-\/>handle)\ \{}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00161}00161\ \ \ \ \ \ \ \ \ vkDestroyRenderPass(\mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}}-\/>device.logical\_device,\ renderpass-\/>handle,\ \mbox{\hyperlink{vulkan__backend_8c_a171b208055a0eb2eeace24e130f74bc9}{context}}-\/>allocator);}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00162}00162\ \ \ \ \ \ \ \ \ renderpass-\/>handle\ =\ 0;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00163}00163\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00164}00164\ \}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00181}\mbox{\hyperlink{vulkan__renderpass_8c_ad41d3572b06fd3a6973d84b7362243e9}{00181}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{vulkan__renderpass_8c_ad41d3572b06fd3a6973d84b7362243e9}{vulkan\_renderpass\_begin}}(}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00182}00182\ \ \ \ \ vulkan\_command\_buffer*\ command\_buffer,}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00183}00183\ \ \ \ \ vulkan\_renderpass*\ renderpass,}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00184}00184\ \ \ \ \ VkFramebuffer\ frame\_buffer)\ \{}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00186}00186\ \ \ \ \ \textcolor{comment}{//\ Setup\ render\ area}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00187}00187\ \ \ \ \ VkRenderPassBeginInfo\ begin\_info\ =\ \{VK\_STRUCTURE\_TYPE\_RENDER\_PASS\_BEGIN\_INFO\};}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00188}00188\ \ \ \ \ begin\_info.renderPass\ =\ renderpass-\/>handle;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00189}00189\ \ \ \ \ begin\_info.framebuffer\ =\ frame\_buffer;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00190}00190\ \ \ \ \ begin\_info.renderArea.offset.x\ =\ renderpass-\/>x;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00191}00191\ \ \ \ \ begin\_info.renderArea.offset.y\ =\ renderpass-\/>y;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00192}00192\ \ \ \ \ begin\_info.renderArea.extent.width\ =\ renderpass-\/>w;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00193}00193\ \ \ \ \ begin\_info.renderArea.extent.height\ =\ renderpass-\/>h;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00195}00195\ \ \ \ \ \textcolor{comment}{//\ Setup\ clear\ values}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00196}00196\ \ \ \ \ VkClearValue\ clear\_values[2];}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00197}00197\ \ \ \ \ \mbox{\hyperlink{kmemory_8c_aa7107b9ccb0c0358906c79d3dbe398d5}{kzero\_memory}}(clear\_values,\ \textcolor{keyword}{sizeof}(VkClearValue)\ *\ 2);}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00198}00198\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00199}00199\ \ \ \ \ clear\_values[0].color.float32[0]\ =\ renderpass-\/>r;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00200}00200\ \ \ \ \ clear\_values[0].color.float32[1]\ =\ renderpass-\/>g;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00201}00201\ \ \ \ \ clear\_values[0].color.float32[2]\ =\ renderpass-\/>b;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00202}00202\ \ \ \ \ clear\_values[0].color.float32[3]\ =\ renderpass-\/>a;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00203}00203\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00204}00204\ \ \ \ \ clear\_values[1].depthStencil.depth\ =\ renderpass-\/>depth;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00205}00205\ \ \ \ \ clear\_values[1].depthStencil.stencil\ =\ renderpass-\/>stencil;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00206}00206\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00207}00207\ \ \ \ \ begin\_info.clearValueCount\ =\ 2;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00208}00208\ \ \ \ \ begin\_info.pClearValues\ =\ clear\_values;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00210}00210\ \ \ \ \ \textcolor{comment}{//\ Start\ recording\ commands\ inside\ the\ render\ pass}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00211}00211\ \ \ \ \ vkCmdBeginRenderPass(command\_buffer-\/>handle,\ \&begin\_info,\ VK\_SUBPASS\_CONTENTS\_INLINE);}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00212}00212\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00213}00213\ \ \ \ \ \textcolor{comment}{//\ Update\ command\ buffer\ state}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00214}00214\ \ \ \ \ command\_buffer-\/>state\ =\ COMMAND\_BUFFER\_STATE\_IN\_RENDER\_PASS;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00215}00215\ \}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00226}\mbox{\hyperlink{vulkan__renderpass_8c_afc8178f17adfad94842efd1ec0f74d83}{00226}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{vulkan__renderpass_8c_afc8178f17adfad94842efd1ec0f74d83}{vulkan\_renderpass\_end}}(vulkan\_command\_buffer*\ command\_buffer,\ vulkan\_renderpass*\ renderpass)\ \{}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00227}00227\ \ \ \ \ \textcolor{comment}{//\ End\ the\ render\ pass}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00228}00228\ \ \ \ \ vkCmdEndRenderPass(command\_buffer-\/>handle);}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00230}00230\ \ \ \ \ \textcolor{comment}{//\ Update\ command\ buffer\ state}}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00231}00231\ \ \ \ \ command\_buffer-\/>state\ =\ COMMAND\_BUFFER\_STATE\_RECORDING\_ENDED;}
\DoxyCodeLine{\Hypertarget{vulkan__renderpass_8c_source_l00232}00232\ \}}

\end{DoxyCode}
